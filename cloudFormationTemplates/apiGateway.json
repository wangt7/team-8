{
    "Description": "API Gateway for the Smart Home Manager Lights Controller API",
    "Resources": {
        "SmartHomeMangerAPI" : {
            "Properties": {
                "Description": "This is the smart home manager API, which provides an interface for interacting with users devices",
                "Name": "SmartHomeManagerAPI"
            },
            "Type": "AWS::ApiGateway::RestApi"
        },
        "LightsResource": {
            "Properties": {
                "ParentId": {
                    "Fn::GetAtt": [
                        "SmartHomeMangerAPI",
                        "RootResourceId"
                    ]
                },
                "PathPart": "lights",
                "RestApiId": {
                    "Ref": "SmartHomeMangerAPI"
                }
            },
            "Type": "AWS::ApiGateway::Resource"
        },
        "LightsPostMethod": {
            "Type": "AWS::ApiGateway::Method",
            "Properties":{
              "AuthorizationType": "NONE",
              "HttpMethod": "POST",
              "ResourceId": {
                  "Ref": "LightsResource"
              },
              "RestApiId":{
                  "Ref": "SmartHomeMangerAPI"
              }
            }
        },
        "LightsAddResource": {
            "Properties": {
                "ParentId": {  
                    "Ref": "LightsResource"
                },
                "PathPart": "add",
                "RestApiId": {
                    "Ref": "SmartHomeMangerAPI"
                }
            },
            "Type": "AWS::ApiGateway::Resource"
        },
        "LightsAddPostMethod": {
            "Type": "AWS::ApiGateway::Method",
            "Properties":{
              "AuthorizationType": "NONE",
              "HttpMethod": "POST",
              "ResourceId": {
                  "Ref": "LightsAddResource"
              },
              "RestApiId":{
                  "Ref": "SmartHomeMangerAPI"
              }
            }
        },
        "LightsUpdateResource": {
            "Properties": {
                "ParentId": {  
                    "Ref": "LightsResource"
                },
                "PathPart": "update",
                "RestApiId": {
                    "Ref": "SmartHomeMangerAPI"
                }
            },
            "Type": "AWS::ApiGateway::Resource"
        },
        "LightsUpdatePostMethod": {
            "Type": "AWS::ApiGateway::Method",
            "Properties":{
              "AuthorizationType": "NONE",
              "HttpMethod": "POST",
              "ResourceId": {
                  "Ref": "LightsUpdateResource"
              },
              "RestApiId":{
                  "Ref": "SmartHomeMangerAPI"
              }
            }
        },
        "LightsStateResource": {
            "Properties": {
                "ParentId": {  
                    "Ref": "LightsResource"
                },
                "PathPart": "state",
                "RestApiId": {
                    "Ref": "SmartHomeMangerAPI"
                }
            },
            "Type": "AWS::ApiGateway::Resource"
        },
        "LightsStatePostMethod": {
            "Type": "AWS::ApiGateway::Method",
            "Properties":{
              "AuthorizationType": "NONE",
              "HttpMethod": "POST",
              "ResourceId": {
                  "Ref": "LightsStateResource"
              },
              "RestApiId":{
                  "Ref": "SmartHomeMangerAPI"
              }
            }
        }
    }
}